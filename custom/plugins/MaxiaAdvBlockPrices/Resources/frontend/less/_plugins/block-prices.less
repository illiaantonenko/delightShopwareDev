/**
 * Block prices table
 */
.mabp-block-prices--container {
  display: block;
  .unitize(margin-bottom, 20);
  border: 1px solid @mabp-border-color;
  .border-radius(@mabp-border-radius);
  clear: both;

  &.position-afterBuyButton {
    .unitize(margin-top, 10);
  }
}

.mabp-block-prices--heading {
  .unitize(padding, 10);
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-basis: 50%;
  box-sizing: border-box;
  font-weight: @font-bold-weight;
  border-bottom: 1px solid @mabp-border-color;

  .mabp-block-prices--heading-cell {
    flex-grow: 1;
  }
}

.mabp-block-prices--row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-basis: 50%;
  position: relative;
  .unitize(height, @mabp-row-height);
  box-sizing: content-box;
  transition: height ease-out .2s;
  border-bottom: 1px solid @mabp-border-color;

  &:last-child {
    border-bottom: none;
  }

  // selected row indicator
  &:after {
    opacity: 0;
    transition: all ease .2s;
    content: ' ';
    position: absolute;
    display: block;
    .unitize(width, @mabp-active-row-indicator-width);
    top: -1px;
    right: -1px;
    height: calc(~'100% + 2px');
    background-color: @mabp-active-row-indicator-color;
  }
}

.has-transparency .mabp-block-prices--row {
  opacity: .65;
}

.is--clickable .mabp-block-prices--row {
  cursor: pointer;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;

  &:hover:after {
    opacity: .25;
  }
}

.has-transparency .mabp-block-prices--row:hover {
  opacity: 1;
}

.mabp-block-prices--cell {
  flex-grow: 1;
  .unitize(font-size, @font-size-h4);
  .unitize(line-height, @font-size-h4);
  .unitize(padding-left, 15);
  text-align: left;

  &:last-child {
    .unitize(padding-right, 15);
  }

  &.is--prices-cell {
    text-align: right;
  }

  &.is--discount-cell {
    .unitize(padding-left, 2);
    flex-grow: 0;
  }
}

.mabp-block-prices--until,
.mabp-block-prices--from,
.mabp-block-prices--quantity-number,
.mabp-block-prices--purchase-unit {
  display: inline-block;
  .unitize(min-width, 15);
  .unitize(font-size, @mabp-amount-font-size);
  .unitize(line-height, @mabp-amount-font-size);
}

.mabp-block-prices--price {
  .unitize(font-size, @mabp-price-font-size);
  .unitize(line-height, @mabp-price-font-size);
  font-weight: @font-bold-weight;
  transition: all ease .2s;
  display: flex;
  justify-content: flex-end;
  align-items: center;

  &.price--pseudo {
    color: @badge-discount-bg;

    .pseudoprice-original {
      display: inline-block;
      color: @text-color;
      font-weight: normal;
      .unitize(margin-right, 7);
      .unitize(margin-bottom, 2);
      .unitize(font-size, 12);
    }
  }
}

/**
 * Pseudoprice discount badge
 */
.product--details .mabp-block-prices--cell .price--discount-icon {
  margin: 0;
  .unitize(padding-top, 1);
  .unitize(padding-bottom, 1);
  .unitize(padding-left, 4);
  .unitize(padding-right, 4);
  .unitize(margin-left, 5);
  .unitize(margin-right, 0);
  .unitize(font-size, 12);
  .unitize(line-height, 18);
}

.mabp-block-prices--priceinfo {
  .unitize(margin-top, 6);
  .unitize(font-size, @mabp-priceinfo-font-size);
  .unitize(line-height, @mabp-priceinfo-font-size);
}

/**
 * Quantity discount badge cell
 */
.mabp-block-prices--discount {
  .unitize(line-height, 14);
  .unitize(font-size, 12);
  .unitize(margin-left, 10);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  .unitize(width, 53);
  .unitize(height, 26);
  .unitize(padding-left, 5);
  .unitize(padding-right, 5);
  background-color: @mabp-discount-badge-bg-color;
  .border-radius(3px);
  color: @mabp-discount-badge-color;
  font-weight: @font-bold-weight;
  text-align: center;

  &:before {
    // triangle
    content: ' ';
    position: absolute;
    left: 0;
    top: 50%;
    margin-left: -4px;
    margin-top: -3px;
    width: 0;
    height: 0;
    border-style: solid;
    border-width: 3px 4px 3px 0;
    border-color: transparent @mabp-discount-badge-bg-color transparent transparent;
  }
}

/**
 * Selected row
 */
.has--active-indicator .mabp-block-prices--row.js--selected {
  opacity: 1;
  cursor: default;
  .unitize(height, @mabp-row-height-active);

  &:after,
  &:hover:after {
    opacity: 1;
  }

  .mabp-block-prices--price {
    .unitize(font-size, @mabp-price-font-size-active);
    .unitize(line-height, @mabp-price-font-size-active);
  }
}

/**
 * Unavailable row
 */
.mabp-block-prices--row.is--unavailable:after {
  display: none;
}

.mabp-block-prices--row.is--unavailable,
.mabp-block-prices--row.is--unavailable:hover {
  cursor: default;
  opacity: @mabp-unavailable-row-opacity;
  background: @mabp-unavailable-row-bg;
}

/**
 * Scrollable
 */
.is--scrollable {
  .mabp-block-prices--rows {
    .unitize(max-height, @mabp-max-height) !important;
    overflow-x: hidden;
    overflow-y: hidden; // set to 'auto' by plugin on scrollbar init
  }

  &.has--scroll-fade {

    // top / bottom gradient
    .simplebar-mask:before,
    .simplebar-mask:after {
      content: '';
      position: absolute;
      display: block;
      left: 0;
      width: 100%;
      opacity: 0;
      transition: opacity .35s ease-in-out;
      .unitize(height, 30);
      pointer-events: none;
    }

    &.scroller-fade-top .simplebar-mask:before {
      top: 0;
      opacity: 1;
      background: -webkit-linear-gradient(top, rgba(0,0,0,@mabp-scrollbar-fade-opacity), rgba(0,0,0,0.0));
      background: -moz-linear-gradient(top, rgba(0,0,0,@mabp-scrollbar-fade-opacity), rgba(0,0,0,0.0));
      background: linear-gradient(to bottom, rgba(0,0,0,@mabp-scrollbar-fade-opacity), rgba(0,0,0,0.0));
    }

    &.scroller-fade-bottom .simplebar-mask:after {
      bottom: 0;
      opacity: 1;
      background: -webkit-linear-gradient(bottom, rgba(0,0,0,@mabp-scrollbar-fade-opacity), rgba(0,0,0,0.0));
      background: -moz-linear-gradient(bottom, rgba(0,0,0,@mabp-scrollbar-fade-opacity), rgba(0,0,0,0.0));
      background: linear-gradient(to top, rgba(0,0,0,@mabp-scrollbar-fade-opacity), rgba(0,0,0,0.0));
    }

  }

  // scrollbar adjustments
  .simplebar-scrollbar {
    .unitize(right, 3);
    .unitize(width, @mabp-scrollbar-width);

    &:before {
      .border-radius(~"{@mabp-scrollbar-width}px");
    }
  }

  .simplebar-track .simplebar-scrollbar.simplebar-visible:before {
    opacity: @mabp-scrollbar-opacity;
  }
}

.is--scrollable .mabp-block-prices--row:after {
  // move active row indicator to the other side
  left: -1px;
  right: 0;
}
